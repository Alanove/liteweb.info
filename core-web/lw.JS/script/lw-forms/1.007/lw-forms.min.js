var lw=this.lw?this.lw:{};lw.validator={version:"1.0.0.3",createDate:"May 01 2012",modifiedDate:"Jan 26 2013",groups:{},resources:{},fields:{},init:function(){var r=lw.validator,n;for(i in r.groups){var t=r.groups[i],n=$("#"+t.Form),u=n.data("groups");defined(u)||(u={});u[t.id]=t;n.data("groups",u);n.data("_validate",!0);n=$("#"+t.Form);n.attr("ajax")||n.bind("submit",r.validateForm);t.fields=[]}$(".lw-validate").each(function(){r.initField($(this))})},disableFutureSubmittion:function(n){n.data("submitted",!0);n.find("input[type=submit]").addClass("submitted");n.find("button[type=submit]").addClass("submitted")},enableFutureSubmittion:function(n){n.data("submitted",null);n.find("input[type=submit]").removeClass("submitted");n.find("button[type=submit]").removeClass("submitted")},validateForm:function(n,t,r){var f=lw.validator,t=t?t:$(this),c,r,o,s,u,h;t.data("validated",null);try{c=t.find("textarea.ckeditor");c.each(function(){this.value=CKEDITOR.instances[this.id].getSnapshot()})}catch(n){}var l=t.data("groups"),a=[f.resources.PleaseFix],e=!0;for(i in l)if(!isOk(r)||(u=i.split(":"),u[u.length-1]==r)){r=l[i];o=r.fields;for(s in o)u=f.validate(o[s]),f.downlightField(o[s]),u.validated||(a.push(u.message),e=!1,f.hilightField(o[s],u.message,!1));h=f.getHtmlMessage(a);!e&&r.SummaryMessageClientID&&$("#"+r.SummaryMessageClientID).html(h);!e&&r.AlertErrorSummary&&lw.alert(h,lw.siteName,"OK","validation-error",function(){f.enableFutureSubmittion(t)})}return t.data("validated",e),e},validateGroup:function(n,t,i){var e=lw.validator,t=t?t:$(this),o,s,u,r,f,h;t.data("validated",null);try{o=t.find("textarea.ckeditor");o.each(function(){this.value=CKEDITOR.instances[this.id].getSnapshot()})}catch(n){}return s=t.data("groups"),u=[],u[0]=[e.resources.PleaseFix],r=!0,f=e.groupValidation(s[i],u,r,t),r=f[0],h=f[1],t.data("validated",r),t.data("message",h),r},groupValidation:function(n,t,i,r){var u=lw.validator,f=n.fields,e;return $.each(f,function(n){var r=u.validate(f[n]);u.downlightField(f[n]);r.validated||(t.push(r.message),i=!1,u.hilightField(f[n],r.message,!1))}),e=u.getHtmlMessage(t),!i&&n.SummaryMessageID&&$("#"+n.SummaryMessageID).html(e),!i&&n.AlertErrorSummary&&lw.alert(e,lw.siteName,"OK","validation-error",function(){u.enableFutureSubmittion(r)}),[i,e]},getHtmlMessage:function(n){return"<h6>"+n.shift()+"<\/h6><ul><li>"+n.join("<\/li><li>")+"<\/li><\/ul>"},checkEmptyField:function(n){var u=lw.validator,i=n.data("d"),r=n.val(),t;if(!isOk(r))if($.browser.msie&&$.browser.version<10)switch(n[0].type){case"text":case"textarea":i.EmptyText&&(n.val(i.EmptyText),n.addClass(i.EmptyClass));break;case"password":n.data("maskinput")?t=n.data("maskinput"):(t=$("<input type=text />"),t.addClass(n[0].className),n.data("maskinput",t),t.val(i.EmptyText),t[0].className=n[0].className,t.addClass(i.EmptyClass),t.css("position","absolute"),t.bind("focus click mousedown keydown",function(){t.css("display","none");setTimeout(function(){n[0].focus()},50)}),$(n[0].parentNode).append(t));t.css({display:"block",width:n.width(),height:n.height(),top:n.position().top,left:n.position().left})}else switch(n[0].type){case"text":case"textarea":case"password":i.EmptyText&&n.addClass(i.EmptyClass)}},initField:function(n){var t=lw.validator,i={},u=n.attr("data-lw-validate"),f,r,e;if(isOk(u)||(u=n.attr("validate")),isOk(u)){for(f=u.split("&"),r=0;r<f.length;r++)f[r].Trim()!=""&&(e=f[r].Trim().split("="),e.length==2&&(i[e[0].Trim()]=e[1].Trim()));n.data("d",i);t.checkEmptyField(n);n.bind("focus click mousedown keydown",function(){n.removeClass(i.EmptyClass);var t=n.data("maskinput");isOk(t)&&t.css("display","none")});n.bind("change blur",function(){var i=lw.validator.validate(n);i.validated?t.downlightField(n):t.hilightField(n,i.message,!0)});n.bind("blur",function(){t.checkEmptyField(n)});t.fields[n.attr("id")]=n;t.groups[i.Group]&&t.groups[i.Group].fields.push(n)}},hilightField:function(n,t,i){var r=lw.validator;n.addClass("lw-not-validated");r.groups[n.data("d").Group]&&r.groups[n.data("d").Group].Bubble&&(n.addClass("lw-bubble"),i?lw.showTooltip(n,"red",t,1500):lw.showTooltip(n,"red",t,0,null,!0),n.data("maskinput")&&n.data("maskinput").css("display","none"));n.data("title",n.attr("title"))},downlightField:function(n){var t=lw.validator;n.removeClass("lw-not-validated");n.removeClass("lw-bubble");n.attr("title",n.data("title"));lw.deleteTooltip(n)},validate:function(n,t){var i=lw.validator,t=t?t:n.data("d"),r=n.val().trim(),e,h,o,c,l,s,f,a,u;if(isOk(t.ValidateWith)){e=$(n[0].form).find("#"+t.ValidateWith);u=e.val();(e[0].type=="checkbox"||e[0].type=="radio")&&(u=e[0].checked?u:null);h=t.ValidateWithValue;t.ValidateWithCondition||(t.ValidateWithCondition="=");switch(t.ValidateWithCondition){case".":if(!isOk(u))return{validated:!0};break;case"<>":if(u==h)return{validated:!0};break;default:if(compare(u,h,t.DataType)!=t.ValidateWithCondition)return{validated:!0}}}if(isOk(t.Required)&&t.Required.toLowerCase()=="true"){o=!1;switch(t.DataType){case"CheckBox":o=n[0].checked;break;case"RadioList":c=n.attr("name");l=$("input[name='"+c+"']");l.each(function(){if(this.checked)return o=!0,!1});break;default:o=r.length>0}if(!o)return new i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Required.Format(t.DisplayName))}if(isOk(r)||isOk(t.Min)||isOk(t.Max)){switch(t.DataType){case"Number":case"Decimal":case"Integer":if(f=/^-?\d*(\.\d+)?$/,f.test(r)){if(isOk(t.Min)&&parseFloat(r)<parseFloat(t.Min)||isOk(t.Max)&&parseFloat(r)>parseFloat(t.Max))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Range_Number.Format(t.DisplayName,t.Min,t.Max))}else return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources[t.DataType].Format(t.DisplayName));break;case"Integer":if(f=/^\d*$/,f.test(r)){if(isOk(t.Min)&&parseFloat(r)<parseFloat(t.Min)||isOk(t.Max)&&parseFloat(r)>parseFloat(t.Max))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Range_Number.Format(t.DisplayName,t.Min,t.Max))}else return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources[t.DataType].Format(t.DisplayName));break;case"Date":if(s=Date.parse(r),isNaN(s))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources[t.DataType].Format(t.DisplayName));if(isOk(t.Min)&&s<Date.parse(t.Min)||isOk(t.Max)&&s>Date.parse(t.Max))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Range_Date.Format(t.DisplayName,t.Min,t.Max));break;case"Email":if(f=/^[a-z]([\.\-\_]{0,}([a-z_0-9]|[a-z_0-9]\.[a-z_0-9])*)+@([a-z0-9]|[a-z0-9][\.\-][a-z0-9])+\.[a-z]{2,}$/i,!f.test(r))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources[t.DataType].Format(t.DisplayName));break;case"Image":if(f=/\.((jpg)|(jpeg)|(bmp)|(gif)|(png))$/i,!f.test(r))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources[t.DataType].Format(t.DisplayName));break;case"String":if(isOk(t.Min)&&r.length<parseFloat(t.Min)||isOk(t.Max)&&r.length>parseFloat(t.Max))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Range_String.Format(t.DisplayName,t.Min,t.Max))}if(isOk(t.CompareTo)){a=$(n[0].form).find("#"+t.CompareTo);u=a.val();switch(t.CompareCondition){case">":if(compare(r,u,t.DataType)!=">")return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Compare_GreaterThan.Format(t.DisplayName,t.CompareToDisplayName));break;case"<":if(compare(r,u,t.DataType)!="<")return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Compare_LessThan.Format(t.DisplayName,t.CompareToDisplayName));break;default:if(compare(r,u,t.DataType)!="=")return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Compare_Equal.Format(t.DisplayName,t.CompareToDisplayName))}}}return{validated:!0}},validateMessage:function(n,t){return{validated:n,message:t}}};lw.ajaxForms={selector:"form[ajax=true]",forms:{},init:function(){var n=lw.ajaxForms;n.forms=$(n.selector);n.forms.each(function(){var t=$(this);t.data("ajaxInit")||(t.data("ajaxInit",!0),t.bind("submit",n.submit))})},submit:function(n){function u(n){n.keyCode==27&&(o.abort(),$(document.body).unbind("keyup",u))}var t=$(this),r,i,o,f,e;return t.data("alreadysubmitted")?(n.stopPropagation(),!1):(t.data("alreadysubmitted",!0),lw.validator.validateForm(n,t),r=t.data("validated"),isOk(r)&&r==!1)?(t.data("alreadysubmitted",!1),!1):(i=t,isOk(t.attr("loaderarea"))&&(i=$(t.attr("loaderarea"))),lw.loader(i),f=t.attr("AjaxCallback"),e="json"||t.attr("DataType"),o=t.ajaxSubmit({data:{ajax:!0},cache:!1,dataType:e,success:function(n){lw.hideLoader(i);var t=n.callBack&&typeof[n.callBack]=="function"?n.callBack:f;isOk(t)&&typeof window[t]=="function"&&window[t](n)},error:function(n){(lw.hideLoader(i),n.status!=0)&&lw.alert(n.responseText,lw.siteName,"OK","validation-error")},complete:function(n){if($(document.body).unbind("keyup",u),t.data("alreadysubmitted",null),e!="json"){var i=n.callBack&&typeof[n.callBack]=="function"?n.callBack:f;isOk(i)&&typeof window[i]=="function"&&window[i](n)}}}),$(document.body).bind("keyup",u),!1)}};
//# sourceMappingURL=lw-forms.min.js.map
