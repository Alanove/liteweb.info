var lw=this.lw?this.lw:{};lw.validator={version:"1.0.0.3",createDate:"May 01 2012",modifiedDate:"Jan 26 2013",groups:{},resources:{},fields:{},init:function(){var r=lw.validator;for(i in r.groups){var n=r.groups[i],u=$("#"+n.Form),t=u.data("groups");defined(t)||(t={});t[n.id]=n;u.data("groups",t);u.data("_validate",!0);n.fields=[]}$(".lw-validate").each(function(){r.initField($(this))})},disableFutureSubmittion:function(n){n.data("submitted",!0);n.find("input[type=submit]").addClass("submitted");n.find("button[type=submit]").addClass("submitted")},enableFutureSubmittion:function(n){n.data("submitted",null);n.find("input[type=submit]").removeClass("submitted");n.find("button[type=submit]").removeClass("submitted")},validateForm:function(n,t){var r=lw.validator,t=t?t:$(this),c,f,e,o,s,h;if(t.data("validated",null),isOk(t.data("submitted"))&&t.data("submitted")==!0)return!1;r.disableFutureSubmittion(t);try{c=t.find("textarea.ckeditor");c.each(function(){this.value=CKEDITOR.instances[this.id].getSnapshot()})}catch(n){}var l=t.data("groups"),a=[r.resources.PleaseFix],u=!0;for(i in l){f=l[i];e=f.fields;for(o in e)s=r.validate(e[o]),r.downlightField(e[o]),s.validated||(a.push(s.message),u=!1,r.hilightField(e[o],s.message,!1));h=r.getHtmlMessage(a);!u&&f.SummaryMessageID&&$("#"+f.SummaryMessageID).html(h);!u&&f.AlertErrorSummary&&lw.alert(h,lw.siteName,"OK","validation-error",function(){r.enableFutureSubmittion(t)})}return t.data("validated",u),u},getHtmlMessage:function(n){return"<h6>"+n.shift()+"<\/h6><ul><li>"+n.join("<\/li><li>")+"<\/li><\/ul>"},checkEmptyField:function(n){var u=lw.validator,i=n.data("d"),r=n.val(),t;if(!isOk(r)||r==i.EmptyText)switch(n[0].type){case"text":case"textarea":i.EmptyText&&(n.val(i.EmptyText),n.addClass(i.EmptyClass));break;case"password":n.data("maskinput")?t=n.data("maskinput"):(t=$("<input type=text />"),n.data("maskinput",t),t.val(i.EmptyText),t[0].className=n[0].className,t.addClass(i.EmptyClass),t.css("position","absolute"),t.bind("focus click mousedown keydown",function(){t.css("display","none");setTimeout(function(){n[0].focus()},50)}),$(n[0].parentNode).append(t));t.css({display:"block",width:n.width(),height:n.height(),top:n.position().top,left:n.position().left})}},initField:function(n){for(var u,t=lw.validator,i={},f=n.attr("validate").split("&"),r=0;r<f.length;r++)f[r].Trim()!=""&&(u=f[r].Trim().split("="),u.length==2&&(i[u[0].Trim()]=u[1].Trim()));n.data("d",i);t.checkEmptyField(n);n.bind("focus click mousedown keydown",function(){n.val()==i.EmptyText&&(n.val(""),n.removeClass(i.EmptyClass));var t=n.data("maskinput");isOk(t)&&t.css("display","none")});n.bind("change blur",function(){var i=lw.validator.validate(n);i.validated?t.downlightField(n):t.hilightField(n,i.message,!0)});n.bind("blur",function(){t.checkEmptyField(n)});t.fields[n.attr("id")]=n;t.groups[i.Group].fields.push(n)},hilightField:function(n,t,i){var r=lw.validator;n.addClass("lw-not-validated");r.groups[n.data("d").Group].Bubble&&(n.addClass("lw-bubble"),i?lw.showTooltip(n,"red",t,1500):lw.showTooltip(n,"red",t,0,null,!0),n.data("maskinput")&&n.data("maskinput").css("display","none"),n.val()==n.data("d").EmptyText&&n.val(""));n.data("title",n.attr("title"))},downlightField:function(n){var t=lw.validator;n.removeClass("lw-not-validated");n.removeClass("lw-bubble");n.attr("title",n.data("title"));lw.deleteTooltip(n)},validate:function(n,t){var i=lw.validator,t=t?t:n.data("d"),r=n.val().trim(),f,s,h,e,u,c,o;if(isOk(t.Required)&&t.Required.toLowerCase()=="true"){f=!1;switch(t.DataType){case"CheckBox":f=n[0].checked;break;case"RadioList":s=n.attr("name");h=$("input[name='"+s+"']");h.each(function(){if(this.checked)return f=!0,!1});break;default:f=r.length>0&&r!=t.EmptyText}if(!f)return new i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Required.Format(t.DisplayName))}if(isOk(r)||isOk(t.Min)||isOk(t.Max)){switch(t.DataType){case"Number":case"Decimal":case"Integer":if(u=/^-?\d*(\.\d+)?$/,u.test(r)){if(isOk(t.Min)&&parseFloat(r)<parseFloat(t.Min)||isOk(t.Max)&&parseFloat(r)>parseFloat(t.Max))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Range_Number.Format(t.DisplayName,t.Min,t.Max))}else return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources[t.DataType].Format(t.DisplayName));case"Integer":if(u=/^\d*$/,!u.test(r))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources[t.DataType].Format(t.DisplayName));break;case"Date":if(e=Date.parse(r),isNaN(e))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources[t.DataType].Format(t.DisplayName));if(isOk(t.Min)&&e<Date.parse(t.Min)||isOk(t.Max)&&e>Date.parse(t.Max))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Range_Date.Format(t.DisplayName,t.Min,t.Max));break;case"Email":if(u=/^[a-z]([\.\-\_]{0,}([a-z_0-9]|[a-z_0-9]\.[a-z_0-9])*)+@([a-z0-9]|[a-z0-9][\.\-][a-z0-9])+\.[a-z]{2,}$/i,!u.test(r))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources[t.DataType].Format(t.DisplayName));break;case"Image":if(u=/\.((jpg)|(jpeg)|(bmp)|(gif)|(png))$/i,!u.test(r))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources[t.DataType].Format(t.DisplayName));break;case"String":if(isOk(t.Min)&&r.length<parseFloat(t.Min)||isOk(t.Max)&&r.length>parseFloat(t.Max))return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Range_String.Format(t.DisplayName,t.Min,t.Max))}if(isOk(t.CompareTo)){c=$(n[0].form).find("#"+t.CompareTo);o=c.val();switch(t.CompareCondition){case"GreaterThan":if(compare(r,o,t.DataType)!=">")return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Compare_GreaterThan.Format(t.DisplayName,t.CompareToDisplayName));break;case"LessThan":if(compare(r,o,t.DataType)!="<")return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Compare_LessThan.Format(t.DisplayName,t.CompareToDisplayName));break;default:if(compare(r,o,t.DataType)!="=")return i.validateMessage(!1,t.CustomMessage?t.CustomMessage:i.resources.Compare_Equal.Format(t.DisplayName,t.CompareToDisplayName))}}}return{validated:!0}},validateMessage:function(n,t){return{validated:n,message:t}}};lw.ajaxForms={selector:"form[ajax=true]",forms:{},init:function(){var n=lw.ajaxForms;n.forms=$(n.selector);n.forms.each(function(){var t=$(this);t.data("ajaxInit")||(t.data("ajaxInit",!0),t.bind("submit",n.submit))})},submit:function(n){function r(n){n.keyCode==27&&(u.abort(),$(document.body).unbind("keyup",r))}var t=$(this),i,u;return t.data("alreadysubmitted")?(n.stopPropagation(),!1):(t.data("alreadysubmitted",!0),lw.validator.validateForm(n,t),i=t.data("validated"),isOk(i)&&i==!1)?!1:(lw.loader(t),u=t.ajaxSubmit({data:{ajax:!0},dataType:"json",success:function(n){var t=n.callBack;isOk(t)&&typeof window[t]=="function"&&window[t](n)},error:function(n){n.status!=0&&alert("An error occured")},complete:function(){lw.hideLoader(t);$(document.body).unbind("keyup",r);t.data("alreadysubmitted",null)}}),$(document.body).bind("keyup",r),!1)}};
//# sourceMappingURL=lw-forms.min.js.map
